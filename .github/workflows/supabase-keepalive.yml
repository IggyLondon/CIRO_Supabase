name: Keep Supabase Project Awake

on:
  schedule:
    # Run every 5 days at 12:00 UTC
    - cron: '0 12 */5 * *'
  workflow_dispatch:  # Allow manual trigger from GitHub UI

jobs:
  keep-alive:
    runs-on: ubuntu-latest
    
    steps:
      - name: Ping Supabase Database
        run: |
          curl -X GET \
            'https://emnuwkxroirerhbablfr.supabase.co/rest/v1/gallery_images?select=id&limit=1' \
            -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVtbnV3a3hyb2lyZXJoYmFibGZyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA5NDI3OTgsImV4cCI6MjA3NjUxODc5OH0.5RCVrNcWG_cF8OOcRUibvO5wqPGtFnx9odm69OKV1_0' \
            -H 'apikey: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVtbnV3a3hyb2lyZXJoYmFibGZyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA5NDI3OTgsImV4cCI6MjA3NjUxODc5OH0.5RCVrNcWG_cF8OOcRUibvO5wqPGtFnx9odm69OKV1_0' \
            -H 'Content-Type: application/json'
      
      - name: Log Success
        run: echo "âœ… Supabase project pinged successfully at $(date)"
